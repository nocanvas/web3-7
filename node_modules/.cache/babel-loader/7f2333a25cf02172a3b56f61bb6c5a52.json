{"ast":null,"code":"import _regeneratorRuntime from\"/Users/john/Documents/GitHub/web3-3/client/web3-7/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/john/Documents/GitHub/web3-3/client/web3-7/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/john/Documents/GitHub/web3-3/client/web3-7/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useCallback}from'react';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function Web3Data(props){var web3Context=props.web3Context;var networkId=web3Context.networkId,networkName=web3Context.networkName,accounts=web3Context.accounts,providerName=web3Context.providerName,lib=web3Context.lib;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),balance=_useState2[0],setBalance=_useState2[1];var getBalance=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var balance;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(accounts&&accounts.length>0)){_context.next=8;break;}_context.t1=lib.utils;_context.next=4;return lib.eth.getBalance(accounts[0]);case 4:_context.t2=_context.sent;_context.t0=_context.t1.fromWei.call(_context.t1,_context.t2,'ether');_context.next=9;break;case 8:_context.t0='Unknown';case 9:balance=_context.t0;setBalance(balance);case 11:case\"end\":return _context.stop();}}},_callee);})),[accounts,lib.eth,lib.utils]);useEffect(function(){getBalance();},[accounts,getBalance,networkId]);var requestAuth=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(web3Context){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return web3Context.requestAuth();case 3:_context2.next=8;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 8:case\"end\":return _context2.stop();}}},_callee2,null,[[0,5]]);}));return function requestAuth(_x){return _ref2.apply(this,arguments);};}();var requestAccess=useCallback(function(web3Context){return requestAuth(web3Context);},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\" \",props.title,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Network: \",networkId?\"\".concat(networkId,\" \\u2013 \").concat(networkName):'No connection']}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Your address: \",accounts&&accounts.length?accounts[0]:'Unknown']}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Your ETH balance: \",balance]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Provider: \",providerName]}),accounts&&accounts.length?/*#__PURE__*/_jsx(\"div\",{children:\"Accounts & Signing Status: Access Granted\"}):!!networkId&&providerName!=='infura'?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:requestAccess,children:\"Request Access\"})}):/*#__PURE__*/_jsx(\"div\",{})]});}","map":{"version":3,"sources":["/Users/john/Documents/GitHub/web3-3/client/web3-7/src/components/Web3Data.js"],"names":["React","useState","useEffect","useCallback","Web3Data","props","web3Context","networkId","networkName","accounts","providerName","lib","balance","setBalance","getBalance","length","utils","eth","fromWei","requestAuth","console","error","requestAccess","title"],"mappings":"yYAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,WAArC,KAAwD,OAAxD,C,wFACA,cAAe,SAASC,CAAAA,QAAT,CAAkBC,KAAlB,CAAyB,IAChCC,CAAAA,WADgC,CAChBD,KADgB,CAChCC,WADgC,IAEhCC,CAAAA,SAFgC,CAEwBD,WAFxB,CAEhCC,SAFgC,CAErBC,WAFqB,CAEwBF,WAFxB,CAErBE,WAFqB,CAERC,QAFQ,CAEwBH,WAFxB,CAERG,QAFQ,CAEEC,YAFF,CAEwBJ,WAFxB,CAEEI,YAFF,CAEgBC,GAFhB,CAEwBL,WAFxB,CAEgBK,GAFhB,eAGVV,QAAQ,CAAC,CAAD,CAHE,wCAGjCW,OAHiC,eAGxBC,UAHwB,eAIxC,GAAMC,CAAAA,UAAU,CAAGX,WAAW,sEAAC,oJAChBM,QAAQ,EAAIA,QAAQ,CAACM,MAAT,CAAkB,CADd,sCACkBJ,GAAG,CAACK,KADtB,uBAC0CL,CAAAA,GAAG,CAACM,GAAJ,CAAQH,UAAR,CAAmBL,QAAQ,CAAC,CAAD,CAA3B,CAD1C,0DAC4BS,OAD5B,8BAC2E,OAD3E,2CACsF,SADtF,QAC1BN,OAD0B,aAE9BC,UAAU,CAACD,OAAD,CAAV,CAF8B,uDAAD,GAG3B,CAACH,QAAD,CAAWE,GAAG,CAACM,GAAf,CAAoBN,GAAG,CAACK,KAAxB,CAH2B,CAA9B,CAKAd,SAAS,CAAC,UAAM,CAChBY,UAAU,GACT,CAFQ,CAEN,CAACL,QAAD,CAAWK,UAAX,CAAuBP,SAAvB,CAFM,CAAT,CAIA,GAAMY,CAAAA,WAAW,2FAAG,kBAAMb,WAAN,8JAEZA,CAAAA,WAAW,CAACa,WAAZ,EAFY,0FAIlBC,OAAO,CAACC,KAAR,eAJkB,qEAAH,kBAAXF,CAAAA,WAAW,6CAAjB,CAOA,GAAMG,CAAAA,aAAa,CAAGnB,WAAW,CAAC,SAACG,WAAD,QAAiBa,CAAAA,WAAW,CAACb,WAAD,CAA5B,EAAD,CAA4C,EAA5C,CAAjC,CACA,mBACA,oCACA,0BAAMD,KAAK,CAACkB,KAAZ,OADA,cAEC,mCACUhB,SAAS,WAAMA,SAAN,oBAAqBC,WAArB,EAAqC,eADxD,GAFD,cAKC,wCACeC,QAAQ,EAAIA,QAAQ,CAACM,MAArB,CAA8BN,QAAQ,CAAC,CAAD,CAAtC,CAA4C,SAD3D,GALD,cAQC,4CACmBG,OADnB,GARD,cAWC,oCACWF,YADX,GAXD,CAcED,QAAQ,EAAIA,QAAQ,CAACM,MAArB,cACD,kEADC,CAIG,CAAC,CAACR,SAAF,EAAeG,YAAY,GAAK,QAAhC,cACJ,kCACA,eAAQ,OAAO,CAAEY,aAAjB,4BADA,EADI,cAKJ,cAvBD,GADA,CA4BC","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nexport default function Web3Data(props) {\nconst { web3Context } = props;\nconst { networkId, networkName, accounts, providerName, lib } = web3Context;\nconst [balance, setBalance] = useState(0);\nconst getBalance = useCallback(async () => {\n\tlet balance = accounts && accounts.length > 0 ? lib.utils.fromWei(await lib.eth.getBalance(accounts[0]), 'ether') : 'Unknown';\n\tsetBalance(balance);\n}, [accounts, lib.eth, lib.utils]);\n\t\nuseEffect(() => {\ngetBalance();\n}, [accounts, getBalance, networkId]);\n\nconst requestAuth = async web3Context => {\n\ttry {\n\t\tawait web3Context.requestAuth();\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n};\nconst requestAccess = useCallback((web3Context) => requestAuth(web3Context), []);\nreturn (\n<div>\n<h3> {props.title} </h3>\n\t<div>\n\tNetwork: {networkId ? `${networkId} â€“ ${networkName}` : 'No connection'}\n\t</div>\n\t<div>\n\tYour address: {accounts && accounts.length ? accounts[0] : 'Unknown'}\n\t</div>\n\t<div>\n\tYour ETH balance: {balance}\n\t</div>\n\t<div>\n\tProvider: {providerName}\n\t</div>\n\t{accounts && accounts.length ? (\n\t<div>\n\tAccounts & Signing Status: Access Granted\n\t</div>\n\t) : !!networkId && providerName !== 'infura' ? (\n\t<div>\n\t<button onClick={requestAccess}>Request Access</button>\n\t</div>\n\t) : (\n\t<div></div>\n\t)}\n</div>\n);\n}"]},"metadata":{},"sourceType":"module"}